{"ast":null,"code":"var _jsxFileName = \"/home/dumbways/Desktop/Landtick Project/client/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useMutation } from \"react-query\";\nimport { UserContext } from \"../context/UserContext\";\nimport { API, setAuthToken } from \"../config/api\";\nimport { Modal, Container, Form, Button, Alert } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = {\n  formBox: {\n    height: \"auto\",\n    padding: \"30px\",\n    borderRadius: \"10px\",\n    background: \"#FFF\"\n  },\n  fontLogin: {\n    fontSize: \"36px\",\n    fontWeight: \"900\",\n    background: \"-webkit-linear-gradient(45deg, #EC7AB7, #EC7A7A)\",\n    webkitBackgroundClip: \"text\",\n    webkitTextFillColor: \"transparent\",\n    marginBottom: \"50px\"\n  },\n  formLogin: {\n    width: \"350px\",\n    height: \"50px\",\n    margin: \"30px auto\"\n  },\n  btnLogin: {\n    borderRadius: \"50px\",\n    border: \"none\",\n    background: \"linear-gradient(#EC7AB7, #EC7A7A)\",\n    width: \"360px\",\n    margin: \"5px auto\"\n  },\n  linkTo: {\n    fontSize: \"18px\",\n    marginTop: \"20px\",\n    color: \"#B1B1B1\"\n  }\n};\nexport default function Login(props) {\n  _s();\n  const navigate = useNavigate();\n  const [, dispatch] = useContext(UserContext);\n  const [message, setMessage] = useState(null);\n  const [formLogin, setFormLogin] = useState({\n    username: '',\n    password: ''\n  });\n  const {\n    username,\n    password\n  } = formLogin;\n  const handleChange = e => {\n    setFormLogin({\n      ...formLogin,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = useMutation(async e => {\n    try {\n      e.preventDefault();\n      const response = await API.post('/login', formLogin);\n      console.log(\"login success : \", response);\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: response.data.data\n      });\n      setAuthToken(localStorage.token);\n      if (response.data.data.role === \"admin\") {\n        navigate(\"/listtransaksi\");\n        alert(\"Admin Success Login\");\n      } else {\n        navigate(\"/\");\n        alert(\"User Success Login\");\n      }\n    } catch (error) {\n      const alert = /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"py-1\",\n        children: \"Login Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this);\n      setMessage(alert);\n      console.log(\"login failed : \", error);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      show: props.show,\n      onHide: props.onHide,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        style: {\n          border: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          fluid: true,\n          style: style.formBox,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: style.fontLogin,\n            className: \"text-center\",\n            children: \"LOGIN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), message && message, /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: e => handleSubmit.mutate(e),\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                placeholder: \"username\",\n                value: username,\n                name: \"username\",\n                onChange: handleChange,\n                style: style.formLogin\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"password\",\n                placeholder: \"password\",\n                value: password,\n                name: \"password\",\n                onChange: handleChange,\n                style: style.formLogin\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: props.onHide,\n                type: \"submit\",\n                size: \"lg\",\n                style: style.btnLogin,\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center\",\n            style: style.linkTo,\n            children: [\"Belum Punya Akun? Klik \", /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: props.onClick,\n              style: {\n                cursor: \"pointer\",\n                fontWeight: \"bold\"\n              },\n              children: \"disini\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 96\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"8YNA6XXJ2FdGziRgls9Dyp8VVZY=\", false, function () {\n  return [useNavigate, useMutation];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useContext","useState","useNavigate","useMutation","UserContext","API","setAuthToken","Modal","Container","Form","Button","Alert","jsxDEV","_jsxDEV","style","formBox","height","padding","borderRadius","background","fontLogin","fontSize","fontWeight","webkitBackgroundClip","webkitTextFillColor","marginBottom","formLogin","width","margin","btnLogin","border","linkTo","marginTop","color","Login","props","_s","navigate","dispatch","message","setMessage","setFormLogin","username","password","handleChange","e","target","name","value","handleSubmit","preventDefault","response","post","console","log","type","payload","data","localStorage","token","role","alert","error","variant","className","children","fileName","_jsxFileName","lineNumber","columnNumber","show","onHide","Header","closeButton","Body","fluid","onSubmit","mutate","Group","Control","placeholder","onChange","onClick","size","cursor","_c","$RefreshReg$"],"sources":["/home/dumbways/Desktop/Landtick Project/client/src/components/Login.js"],"sourcesContent":["import {useContext, useState} from \"react\"\nimport {useNavigate} from \"react-router-dom\"\nimport {useMutation} from \"react-query\"\nimport {UserContext} from \"../context/UserContext\"\nimport {API, setAuthToken} from \"../config/api\"\nimport {Modal, Container, Form, Button, Alert} from \"react-bootstrap\";\n\nconst style = {\n    formBox: {\n        height: \"auto\",\n        padding: \"30px\",\n        borderRadius: \"10px\",\n        background: \"#FFF\",\n    },\n    fontLogin: {\n        fontSize: \"36px\",\n        fontWeight: \"900\",\n        background: \"-webkit-linear-gradient(45deg, #EC7AB7, #EC7A7A)\",\n        webkitBackgroundClip: \"text\",\n        webkitTextFillColor: \"transparent\",\n        marginBottom: \"50px\",\n    },\n    formLogin : {\n        width: \"350px\",\n        height: \"50px\",\n        margin: \"30px auto\"\n    },\n    btnLogin : {\n        borderRadius: \"50px\",\n        border: \"none\",\n        background: \"linear-gradient(#EC7AB7, #EC7A7A)\",\n        width: \"360px\",\n        margin: \"5px auto\"\n\n    },\n    linkTo: {\n        fontSize: \"18px\",\n        marginTop: \"20px\",\n        color: \"#B1B1B1\"\n    },\n}\n\nexport default function Login(props) {\nconst navigate = useNavigate()\nconst [,dispatch] = useContext(UserContext)\nconst [message, setMessage] = useState(null);\n\nconst [formLogin, setFormLogin] = useState({\n    username: '',\n    password: '',\n})\n\nconst {username, password} = formLogin\n\nconst handleChange = (e) => {\n    setFormLogin({\n      ...formLogin,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = useMutation(async (e) => {\n    try {\n        e.preventDefault()\n\n        const response = await API.post('/login', formLogin)\n        console.log(\"login success : \", response)\n\n        dispatch({\n            type: 'LOGIN_SUCCESS',\n            payload: response.data.data,\n        })\n        setAuthToken(localStorage.token)\n        if (response.data.data.role === \"admin\") {\n            navigate(\"/listtransaksi\")\n            alert(\"Admin Success Login\")\n        } else {\n            navigate(\"/\")\n            alert(\"User Success Login\")\n        }\n    } catch (error) {\n        const alert = (\n            <Alert variant=\"danger\" className=\"py-1\">\n                Login Failed\n            </Alert>\n        )\n        setMessage(alert)\n        console.log(\"login failed : \", error)\n    }\n  })\n\n    \n    return(\n        <div>\n            <Modal show={props.show} onHide={props.onHide}>\n                <Modal.Header closeButton style={{border: \"none\"}}></Modal.Header>\n                <Modal.Body>\n                    <Container fluid style={style.formBox}>\n                        <h1 style={style.fontLogin} className=\"text-center\">LOGIN</h1>\n                        {message && message}\n                        <Form onSubmit={(e) => handleSubmit.mutate(e)}>\n                            <Form.Group>\n                                <Form.Control type=\"text\" placeholder=\"username\" value={username} name=\"username\" onChange={handleChange} style={style.formLogin} />\n                            </Form.Group>\n                            <Form.Group>\n                                <Form.Control type=\"password\" placeholder=\"password\" value={password} name=\"password\" onChange={handleChange} style={style.formLogin} />\n                            </Form.Group>\n                        <div className=\"d-grid gap-2\">\n                            <Button onClick={props.onHide} type=\"submit\" size=\"lg\" style={style.btnLogin}>Login</Button>\n                        </div>\n                        </Form>\n                        <p className=\"text-center\" style={style.linkTo}>Belum Punya Akun? Klik <span onClick={props.onClick} style={{cursor: \"pointer\", fontWeight: \"bold\"}}>disini</span></p>\n                    </Container>\n                </Modal.Body>\n            </Modal>\n        </div>\n    )\n}\n\n"],"mappings":";;AAAA,SAAQA,UAAU,EAAEC,QAAQ,QAAO,OAAO;AAC1C,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,WAAW,QAAO,wBAAwB;AAClD,SAAQC,GAAG,EAAEC,YAAY,QAAO,eAAe;AAC/C,SAAQC,KAAK,EAAEC,SAAS,EAAEC,IAAI,EAAEC,MAAM,EAAEC,KAAK,QAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtE,MAAMC,KAAK,GAAG;EACVC,OAAO,EAAE;IACLC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE,MAAM;IACfC,YAAY,EAAE,MAAM;IACpBC,UAAU,EAAE;EAChB,CAAC;EACDC,SAAS,EAAE;IACPC,QAAQ,EAAE,MAAM;IAChBC,UAAU,EAAE,KAAK;IACjBH,UAAU,EAAE,kDAAkD;IAC9DI,oBAAoB,EAAE,MAAM;IAC5BC,mBAAmB,EAAE,aAAa;IAClCC,YAAY,EAAE;EAClB,CAAC;EACDC,SAAS,EAAG;IACRC,KAAK,EAAE,OAAO;IACdX,MAAM,EAAE,MAAM;IACdY,MAAM,EAAE;EACZ,CAAC;EACDC,QAAQ,EAAG;IACPX,YAAY,EAAE,MAAM;IACpBY,MAAM,EAAE,MAAM;IACdX,UAAU,EAAE,mCAAmC;IAC/CQ,KAAK,EAAE,OAAO;IACdC,MAAM,EAAE;EAEZ,CAAC;EACDG,MAAM,EAAE;IACJV,QAAQ,EAAE,MAAM;IAChBW,SAAS,EAAE,MAAM;IACjBC,KAAK,EAAE;EACX;AACJ,CAAC;AAED,eAAe,SAASC,KAAKA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACrC,MAAMC,QAAQ,GAAGnC,WAAW,CAAC,CAAC;EAC9B,MAAM,GAAEoC,QAAQ,CAAC,GAAGtC,UAAU,CAACI,WAAW,CAAC;EAC3C,MAAM,CAACmC,OAAO,EAAEC,UAAU,CAAC,GAAGvC,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAM,CAACyB,SAAS,EAAEe,YAAY,CAAC,GAAGxC,QAAQ,CAAC;IACvCyC,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE;EACd,CAAC,CAAC;EAEF,MAAM;IAACD,QAAQ;IAAEC;EAAQ,CAAC,GAAGjB,SAAS;EAEtC,MAAMkB,YAAY,GAAIC,CAAC,IAAK;IACxBJ,YAAY,CAAC;MACX,GAAGf,SAAS;MACZ,CAACmB,CAAC,CAACC,MAAM,CAACC,IAAI,GAAGF,CAAC,CAACC,MAAM,CAACE;IAC5B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,YAAY,GAAG9C,WAAW,CAAC,MAAO0C,CAAC,IAAK;IAC5C,IAAI;MACAA,CAAC,CAACK,cAAc,CAAC,CAAC;MAElB,MAAMC,QAAQ,GAAG,MAAM9C,GAAG,CAAC+C,IAAI,CAAC,QAAQ,EAAE1B,SAAS,CAAC;MACpD2B,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEH,QAAQ,CAAC;MAEzCb,QAAQ,CAAC;QACLiB,IAAI,EAAE,eAAe;QACrBC,OAAO,EAAEL,QAAQ,CAACM,IAAI,CAACA;MAC3B,CAAC,CAAC;MACFnD,YAAY,CAACoD,YAAY,CAACC,KAAK,CAAC;MAChC,IAAIR,QAAQ,CAACM,IAAI,CAACA,IAAI,CAACG,IAAI,KAAK,OAAO,EAAE;QACrCvB,QAAQ,CAAC,gBAAgB,CAAC;QAC1BwB,KAAK,CAAC,qBAAqB,CAAC;MAChC,CAAC,MAAM;QACHxB,QAAQ,CAAC,GAAG,CAAC;QACbwB,KAAK,CAAC,oBAAoB,CAAC;MAC/B;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZ,MAAMD,KAAK,gBACPhD,OAAA,CAACF,KAAK;QAACoD,OAAO,EAAC,QAAQ;QAACC,SAAS,EAAC,MAAM;QAAAC,QAAA,EAAC;MAEzC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CACV;MACD7B,UAAU,CAACqB,KAAK,CAAC;MACjBR,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEQ,KAAK,CAAC;IACzC;EACF,CAAC,CAAC;EAGA,oBACIjD,OAAA;IAAAoD,QAAA,eACIpD,OAAA,CAACN,KAAK;MAAC+D,IAAI,EAAEnC,KAAK,CAACmC,IAAK;MAACC,MAAM,EAAEpC,KAAK,CAACoC,MAAO;MAAAN,QAAA,gBAC1CpD,OAAA,CAACN,KAAK,CAACiE,MAAM;QAACC,WAAW;QAAC3D,KAAK,EAAE;UAACgB,MAAM,EAAE;QAAM;MAAE;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAe,CAAC,eAClExD,OAAA,CAACN,KAAK,CAACmE,IAAI;QAAAT,QAAA,eACPpD,OAAA,CAACL,SAAS;UAACmE,KAAK;UAAC7D,KAAK,EAAEA,KAAK,CAACC,OAAQ;UAAAkD,QAAA,gBAClCpD,OAAA;YAAIC,KAAK,EAAEA,KAAK,CAACM,SAAU;YAAC4C,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAC7D9B,OAAO,IAAIA,OAAO,eACnB1B,OAAA,CAACJ,IAAI;YAACmE,QAAQ,EAAG/B,CAAC,IAAKI,YAAY,CAAC4B,MAAM,CAAChC,CAAC,CAAE;YAAAoB,QAAA,gBAC1CpD,OAAA,CAACJ,IAAI,CAACqE,KAAK;cAAAb,QAAA,eACPpD,OAAA,CAACJ,IAAI,CAACsE,OAAO;gBAACxB,IAAI,EAAC,MAAM;gBAACyB,WAAW,EAAC,UAAU;gBAAChC,KAAK,EAAEN,QAAS;gBAACK,IAAI,EAAC,UAAU;gBAACkC,QAAQ,EAAErC,YAAa;gBAAC9B,KAAK,EAAEA,KAAK,CAACY;cAAU;gBAAAwC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5H,CAAC,eACbxD,OAAA,CAACJ,IAAI,CAACqE,KAAK;cAAAb,QAAA,eACPpD,OAAA,CAACJ,IAAI,CAACsE,OAAO;gBAACxB,IAAI,EAAC,UAAU;gBAACyB,WAAW,EAAC,UAAU;gBAAChC,KAAK,EAAEL,QAAS;gBAACI,IAAI,EAAC,UAAU;gBAACkC,QAAQ,EAAErC,YAAa;gBAAC9B,KAAK,EAAEA,KAAK,CAACY;cAAU;gBAAAwC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChI,CAAC,eACjBxD,OAAA;cAAKmD,SAAS,EAAC,cAAc;cAAAC,QAAA,eACzBpD,OAAA,CAACH,MAAM;gBAACwE,OAAO,EAAE/C,KAAK,CAACoC,MAAO;gBAAChB,IAAI,EAAC,QAAQ;gBAAC4B,IAAI,EAAC,IAAI;gBAACrE,KAAK,EAAEA,KAAK,CAACe,QAAS;gBAAAoC,QAAA,EAAC;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3F,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eACPxD,OAAA;YAAGmD,SAAS,EAAC,aAAa;YAAClD,KAAK,EAAEA,KAAK,CAACiB,MAAO;YAAAkC,QAAA,GAAC,yBAAuB,eAAApD,OAAA;cAAMqE,OAAO,EAAE/C,KAAK,CAAC+C,OAAQ;cAACpE,KAAK,EAAE;gBAACsE,MAAM,EAAE,SAAS;gBAAE9D,UAAU,EAAE;cAAM,CAAE;cAAA2C,QAAA,EAAC;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/J;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEd;AAACjC,EAAA,CA3EuBF,KAAK;EAAA,QACZhC,WAAW,EAkBLC,WAAW;AAAA;AAAAkF,EAAA,GAnBVnD,KAAK;AAAA,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}